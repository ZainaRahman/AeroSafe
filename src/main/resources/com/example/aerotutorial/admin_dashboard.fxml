<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="com.example.aerotutorial.AdminDashboardController" style="-fx-background-color: #ecf0f1;">

    <top>
        <VBox style="-fx-background-color: #c0392b; -fx-padding: 15;">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label fx:id="welcomeLabel" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;" text="ðŸ›ï¸ Admin Dashboard" HBox.hgrow="ALWAYS"/>
                <Button onAction="#logout" style="-fx-font-size: 13px; -fx-padding: 8 15; -fx-background-color: #95a5a6; -fx-text-fill: white; -fx-background-radius: 5;" text="ðŸšª Logout" />
            </HBox>
            <Label style="-fx-font-size: 13px; -fx-text-fill: white; -fx-padding: 5 0 0 0;" text="Government Official - Policy Management &amp; Public Health Monitoring" />
        </VBox>
    </top>

    <left>
        <VBox alignment="TOP_CENTER" prefWidth="200" spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
            <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;" text="ðŸ›ï¸ Admin Panel" />

            <Button maxWidth="Infinity" onAction="#showUsers" style="-fx-font-size: 13px; -fx-padding: 10; -fx-background-color: #e74c3c; -fx-text-fill: white; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ‘¥ Users" />
            <Button maxWidth="Infinity" onAction="#showReports" style="-fx-font-size: 13px; -fx-padding: 10; -fx-background-color: #f39c12; -fx-text-fill: white; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ“‹ Reports" />
            <Button maxWidth="Infinity" onAction="#showAlerts" style="-fx-font-size: 13px; -fx-padding: 10; -fx-background-color: #d35400; -fx-text-fill: white; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸš¨ Alerts" />
            <Button maxWidth="Infinity" onAction="#showPolicyData" style="-fx-font-size: 13px; -fx-padding: 10; -fx-background-color: #8e44ad; -fx-text-fill: white; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ“Š Policy Data" />
        </VBox>
    </left>

    <center>
        <StackPane fx:id="contentPane">

            <!-- Users Panel -->
            <ScrollPane fx:id="usersPanel" fitToWidth="true" visible="true">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 8;">
                        <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="ðŸ‘¥ User Management" />
                        <Separator />

                        <TabPane>
                            <Tab text="Regular Users" closable="false">
                                <VBox spacing="10" style="-fx-padding: 10;">
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <Label text="Total Users:" style="-fx-font-weight: bold;"/>
                                        <Label fx:id="totalUsersLabel" text="0" style="-fx-text-fill: #e74c3c;"/>
                                    </HBox>
                                    <TableView fx:id="usersTable" prefHeight="300">
                                        <columns>
                                            <TableColumn fx:id="userIdCol" text="ID" prefWidth="50" />
                                            <TableColumn fx:id="userNameCol" text="Username" prefWidth="150" />
                                            <TableColumn fx:id="userLocationCol" text="Location" prefWidth="200" />
                                        </columns>
                                    </TableView>
                                    <Button text="ðŸ”„ Refresh Users" onAction="#refreshUsers" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 8 15;"/>
                                </VBox>
                            </Tab>

                            <Tab text="Researchers" closable="false">
                                <VBox spacing="10" style="-fx-padding: 10;">
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <Label text="Total Researchers:" style="-fx-font-weight: bold;"/>
                                        <Label fx:id="totalResearchersLabel" text="0" style="-fx-text-fill: #9b59b6;"/>
                                    </HBox>
                                    <TableView fx:id="researchersTable" prefHeight="300">
                                        <columns>
                                            <TableColumn fx:id="researcherIdCol" text="ID" prefWidth="50" />
                                            <TableColumn fx:id="researcherNameCol" text="Username" prefWidth="150" />
                                            <TableColumn fx:id="researcherLocationCol" text="Location" prefWidth="200" />
                                        </columns>
                                    </TableView>
                                    <Button text="ðŸ”„ Refresh Researchers" onAction="#refreshResearchers" style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-padding: 8 15;"/>
                                </VBox>
                            </Tab>

                            <Tab text="Admins" closable="false">
                                <VBox spacing="10" style="-fx-padding: 10;">
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <Label text="Total Admins:" style="-fx-font-weight: bold;"/>
                                        <Label fx:id="totalAdminsLabel" text="0" style="-fx-text-fill: #c0392b;"/>
                                    </HBox>
                                    <TableView fx:id="adminsTable" prefHeight="300">
                                        <columns>
                                            <TableColumn fx:id="adminIdCol" text="ID" prefWidth="50" />
                                            <TableColumn fx:id="adminNameCol" text="Username" prefWidth="150" />
                                            <TableColumn fx:id="adminLocationCol" text="Location" prefWidth="200" />
                                        </columns>
                                    </TableView>
                                    <Button text="ðŸ”„ Refresh Admins" onAction="#refreshAdmins" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-padding: 8 15;"/>
                                </VBox>
                            </Tab>
                        </TabPane>
                    </VBox>
                </VBox>
            </ScrollPane>

            <!-- Reports Panel -->
            <ScrollPane fx:id="reportsPanel" fitToWidth="true" visible="false">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 8;">
                        <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="ðŸ“‹ User Reports" />
                        <Label style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;" text="Environmental issue reports submitted by users" />
                        <Separator />

                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Total Reports:" style="-fx-font-weight: bold;"/>
                            <Label fx:id="totalReportsLabel" text="0" style="-fx-text-fill: #f39c12; -fx-font-weight: bold;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <ComboBox fx:id="reportStatusFilter" promptText="Filter by Status" onAction="#filterReports"/>
                        </HBox>

                        <TableView fx:id="reportsTable" prefHeight="400">
                            <columns>
                                <TableColumn fx:id="reportIdCol" text="ID" prefWidth="50" />
                                <TableColumn fx:id="reportDateCol" text="Date" prefWidth="130" />
                                <TableColumn fx:id="reporterNameCol" text="Reporter" prefWidth="100" />
                                <TableColumn fx:id="reportLocationCol" text="Location" prefWidth="150" />
                                <TableColumn fx:id="reportIssueCol" text="Issue Type" prefWidth="150" />
                                <TableColumn fx:id="reportSeverityCol" text="Severity" prefWidth="100" />
                                <TableColumn fx:id="reportStatusCol" text="Status" prefWidth="100" />
                            </columns>
                        </TableView>

                        <HBox spacing="10">
                            <Button text="ðŸ“„ View Details" onAction="#viewReportDetails" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 8 15;"/>
                            <Button text="âœ… Mark as Resolved" onAction="#markReportResolved" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-padding: 8 15;"/>
                            <Button text="ðŸ”„ Refresh Reports" onAction="#refreshReports" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-padding: 8 15;"/>
                        </HBox>
                    </VBox>
                </VBox>
            </ScrollPane>

            <!-- Alerts Panel -->
            <ScrollPane fx:id="alertsPanel" fitToWidth="true" visible="false">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 8;">
                        <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="ðŸš¨ Public Health Alerts" />
                        <Separator />

                        <VBox spacing="10" style="-fx-background-color: #fff3cd; -fx-padding: 15; -fx-background-radius: 5; -fx-border-color: #ffc107; -fx-border-width: 2; -fx-border-radius: 5;">
                            <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #856404;" text="Create New Public Alert" />

                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="Alert Type:" style="-fx-font-weight: bold;"/>
                                <ComboBox fx:id="alertTypeCombo" prefWidth="200"/>
                            </HBox>

                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="Severity:" style="-fx-font-weight: bold;"/>
                                <ComboBox fx:id="alertSeverityCombo" prefWidth="200"/>
                            </HBox>

                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="Location:" style="-fx-font-weight: bold;"/>
                                <TextField fx:id="alertLocationField" promptText="e.g., Dhaka, Bangladesh" prefWidth="300"/>
                            </HBox>

                            <VBox spacing="5">
                                <Label text="Alert Message:" style="-fx-font-weight: bold;"/>
                                <TextArea fx:id="alertMessageArea" promptText="Enter public alert message..." prefHeight="100" wrapText="true"/>
                            </VBox>

                            <Button text="ðŸ“¢ Issue Alert" onAction="#issueAlert" style="-fx-background-color: #d35400; -fx-text-fill: white; -fx-padding: 10 20; -fx-font-weight: bold;"/>
                        </VBox>

                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-padding: 10 0 0 0;" text="Active Alerts" />
                        <VBox fx:id="activeAlertsBox" spacing="10"/>
                    </VBox>
                </VBox>
            </ScrollPane>

            <!-- Policy Data Panel -->
            <ScrollPane fx:id="policyDataPanel" fitToWidth="true" visible="false">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 8;">
                        <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="ðŸ“Š Policy-Relevant Data" />
                        <Separator />

                        <GridPane hgap="20" vgap="20" style="-fx-padding: 10;">
                            <VBox spacing="10" style="-fx-background-color: #e8f5e9; -fx-padding: 20; -fx-background-radius: 8; -fx-border-color: #4caf50; -fx-border-width: 2; -fx-border-radius: 8;" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2e7d32;" text="Good AQI Days" />
                                <Label fx:id="goodAqiDaysLabel" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #4caf50;" text="--" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: #2e7d32;" text="Last 30 days" />
                            </VBox>

                            <VBox spacing="10" style="-fx-background-color: #fff3e0; -fx-padding: 20; -fx-background-radius: 8; -fx-border-color: #ff9800; -fx-border-width: 2; -fx-border-radius: 8;" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #e65100;" text="Moderate AQI Days" />
                                <Label fx:id="moderateAqiDaysLabel" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #ff9800;" text="--" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: #e65100;" text="Last 30 days" />
                            </VBox>

                            <VBox spacing="10" style="-fx-background-color: #ffebee; -fx-padding: 20; -fx-background-radius: 8; -fx-border-color: #f44336; -fx-border-width: 2; -fx-border-radius: 8;" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #c62828;" text="Unhealthy AQI Days" />
                                <Label fx:id="unhealthyAqiDaysLabel" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #f44336;" text="--" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: #c62828;" text="Last 30 days" />
                            </VBox>

                            <VBox spacing="10" style="-fx-background-color: #f3e5f5; -fx-padding: 20; -fx-background-radius: 8; -fx-border-color: #9c27b0; -fx-border-width: 2; -fx-border-radius: 8;" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #6a1b9a;" text="Total Users Affected" />
                                <Label fx:id="affectedUsersLabel" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #9c27b0;" text="--" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: #6a1b9a;" text="Estimated" />
                            </VBox>
                        </GridPane>

                        <Button text="ðŸ“Š Generate Policy Report" onAction="#generatePolicyReport" style="-fx-background-color: #8e44ad; -fx-text-fill: white; -fx-padding: 10 20; -fx-font-weight: bold;"/>

                        <Label fx:id="policyReportLabel" style="-fx-font-size: 13px; -fx-text-fill: #2c3e50; -fx-padding: 15; -fx-background-color: #ecf0f1; -fx-background-radius: 5;" wrapText="true"/>
                    </VBox>
                </VBox>
            </ScrollPane>

        </StackPane>
    </center>

</BorderPane>

