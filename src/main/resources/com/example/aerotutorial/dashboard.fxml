<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.web.WebView?>

<!-- Main BorderPane Layout -->

<BorderPane minHeight="-Infinity" minWidth="-Infinity" prefHeight="800" prefWidth="1200" style="-fx-background-color: #f5f5f5;" xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/25" fx:controller="com.example.aerotutorial.DashboardController">

    <!-- Left Sidebar with Buttons -->
    <left>
        <VBox alignment="TOP_CENTER" prefWidth="220" spacing="15" style="-fx-background-color: #2c3e50; -fx-padding: 20;">
            <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;" text="ðŸŒ AeroSafe" />
            <Separator style="-fx-background-color: rgba(255,255,255,0.2);" />

            <VBox spacing="10" VBox.vgrow="ALWAYS">
                <Label style="-fx-font-size: 11px; -fx-text-fill: #95a5a6; -fx-font-weight: bold; -fx-padding: 10 0 5 0;" text="ACTIONS" />

                <Button maxWidth="Infinity" onAction="#refreshCurrentLocation" style="-fx-font-size: 14px; -fx-padding: 12 15; -fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 5; -fx-cursor: hand; -fx-font-weight: bold;" text="ðŸ”„ Refresh AQI" />

                <Button maxWidth="Infinity" onAction="#addTestData" style="-fx-font-size: 14px; -fx-padding: 12 15; -fx-background-color: #27ae60; -fx-text-fill: white; -fx-background-radius: 5; -fx-cursor: hand; -fx-font-weight: bold;" text="ðŸ“Š Add Test Data" />

                <Region VBox.vgrow="ALWAYS" />

                <Separator style="-fx-background-color: rgba(255,255,255,0.2);" />

                <Button maxWidth="Infinity" onAction="#logout" style="-fx-font-size: 14px; -fx-padding: 12 15; -fx-background-color: #e74c3c; -fx-text-fill: white; -fx-background-radius: 5; -fx-cursor: hand; -fx-font-weight: bold;" text="ðŸšª Logout" />
            </VBox>
        </VBox>
    </left>

    <!-- Center Content Area with ScrollPane -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox spacing="20" style="-fx-padding: 20;">

                <!-- Header -->
                <VBox alignment="CENTER" spacing="5">
                    <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Air Quality Index Dashboard" />
                    <Label style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;" text="ðŸ“ Select a location on the map to view real-time AQI data and predictions" />
                </VBox>

                <!-- Selected Location Display -->
                <HBox alignment="CENTER" spacing="10" style="-fx-background-color: #3498db; -fx-padding: 15 20; -fx-background-radius: 8;">
                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: white;" text="ðŸ“ Selected Location:" />
                    <Label fx:id="locationLabel" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #ecf0f1;" text="No location selected" />
                </HBox>

                <!-- Map Section -->
                <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="ðŸ—ºï¸ Interactive Map" />
                    <WebView fx:id="mapView" prefHeight="400" prefWidth="850" />
                </VBox>

                <!-- AQI Display Panel -->
                <HBox alignment="CENTER" spacing="20">
                    <VBox alignment="CENTER" spacing="8" style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-size: 12px; -fx-text-fill: #95a5a6; -fx-font-weight: bold;" text="CURRENT AQI" />
                        <Label fx:id="currentAqiLabel" style="-fx-font-size: 26px; -fx-font-weight: bold;" text="Current AQI: -" />
                        <Label fx:id="aqiAlertLabel" style="-fx-font-size: 16px; -fx-font-weight: bold;" text="" />
                    </VBox>

                    <VBox alignment="CENTER" spacing="8" style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-size: 12px; -fx-text-fill: #95a5a6; -fx-font-weight: bold;" text="PREDICTED AQI" />
                        <Label fx:id="predictedAqiLabel" style="-fx-font-size: 22px; -fx-font-weight: bold;" text="Predicted AQI: -" />
                        <Label style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;" text="(Tomorrow)" />
                    </VBox>
                </HBox>

                <!-- Chart Section -->
                <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="ðŸ“Š 7-Day AQI History &amp; Trend Analysis" />
                    <LineChart fx:id="historyChart" legendVisible="false" prefHeight="350" prefWidth="850" style="-fx-background-color: transparent;">
                        <xAxis>
                            <CategoryAxis label="Day" style="-fx-font-size: 12px;" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="AQI Value" lowerBound="0" style="-fx-font-size: 12px;" upperBound="350" />
                        </yAxis>
                    </LineChart>
                    <Label style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d; -fx-font-style: italic;" text="ðŸ’¡ Hover over data points to see detailed AQI information" />
                </VBox>

                <!-- Info Section -->
                <VBox spacing="10" style="-fx-background-color: #e8f4f8; -fx-padding: 15; -fx-background-radius: 8;">
                    <Label style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="â„¹ï¸ AQI Color Guide:" />
                    <VBox spacing="8">
                        <HBox spacing="20">
                            <Label style="-fx-text-fill: #00E400; -fx-font-size: 12px; -fx-font-weight: bold; -fx-min-width: 150;" text="â— 0-50 Good" />
                            <Label style="-fx-text-fill: #FFAA00; -fx-font-size: 12px; -fx-font-weight: bold; -fx-min-width: 150;" text="â— 51-100 Moderate" />
                            <Label style="-fx-text-fill: #FF7E00; -fx-font-size: 12px; -fx-font-weight: bold; -fx-min-width: 220;" text="â— 101-150 Unhealthy (Sensitive)" />
                        </HBox>
                        <HBox spacing="20">
                            <Label style="-fx-text-fill: #FF0000; -fx-font-size: 12px; -fx-font-weight: bold; -fx-min-width: 150;" text="â— 151-200 Unhealthy" />
                            <Label style="-fx-text-fill: #8F3F97; -fx-font-size: 12px; -fx-font-weight: bold; -fx-min-width: 180;" text="â— 201-300 Very Unhealthy" />
                            <Label style="-fx-text-fill: #7E0023; -fx-font-size: 12px; -fx-font-weight: bold; -fx-min-width: 150;" text="â— 301+ Hazardous" />
                        </HBox>
                    </VBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
